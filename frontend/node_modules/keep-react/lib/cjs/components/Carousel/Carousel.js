"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Carousel=void 0;const jsx_runtime_1=require("react/jsx-runtime"),phosphor_react_1=require("phosphor-react"),react_1=require("react"),react_indiana_drag_scroll_1=__importDefault(require("react-indiana-drag-scroll")),window_exists_1=require("../../helpers/window-exists"),ThemeContext_1=require("../../Keep/ThemeContext"),cn_1=require("../../helpers/cn"),Carousel=({children:e,indicators:t=!1,showControls:r=!1,leftControl:s,rightControl:a,slide:n=!0,slideInterval:i,indicatorsType:o="dot",indicatorsTypeColors:c="white",className:l,...u})=>{var _=(0,window_exists_1.windowExists)()&&-1!==navigator.userAgent.indexOf("IEMobile");const d=(0,react_1.useRef)(null),[m,h]=(0,react_1.useState)(0),[x,p]=(0,react_1.useState)(!1),j=(0,ThemeContext_1.useTheme)().theme.carousel,f=(0,react_1.useMemo)(()=>react_1.Children.map(e,e=>(0,react_1.cloneElement)(e,{className:(0,cn_1.cn)(j.item.base,e.props.className)})),[e,j.item.base]),C=(0,react_1.useCallback)(e=>()=>{f&&(e=(e+f.length)%f.length,d.current&&(d.current.scrollLeft=d.current.clientWidth*e),h(e))},[f]);(0,react_1.useEffect)(()=>{d.current&&!x&&0!==d.current.scrollLeft&&h(Math.round(d.current.scrollLeft/d.current.clientWidth))},[x]),(0,react_1.useEffect)(()=>{if(n){const e=setInterval(()=>!x&&C(m+1)(),i??3e3);return()=>clearInterval(e)}},[m,x,C,n,i]);var g=e=>()=>p(e);return(0,jsx_runtime_1.jsxs)("div",{className:(0,cn_1.cn)(j.base,l),"data-testid":"carousel",...u,children:[(0,jsx_runtime_1.jsx)(react_indiana_drag_scroll_1.default,{className:(0,cn_1.cn)(j.scrollContainer.base,(_||!x)&&j.scrollContainer.snap),draggingClassName:"cursor-grab",innerRef:d,onEndScroll:g(!1),onStartScroll:g(!0),vertical:!1,children:f?.map((e,t)=>(0,jsx_runtime_1.jsx)("div",{className:j.item.wrapper,"data-active":m===t,"data-testid":"carousel-item",children:e},t))}),t&&(0,jsx_runtime_1.jsx)("div",{className:j.indicators.wrapper,children:f?.map((e,t)=>(0,jsx_runtime_1.jsx)("button",{className:(0,cn_1.cn)(j.indicators.base,j.indicators.type[o],t===m&&j.indicators.active.on.type[o],t===m&&j.indicators.active.on.color[c],t!==m&&j.indicators.active.off.color[c]),onClick:C(t),"data-testid":"carousel-indicator"},t))}),f&&r&&(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsx)("div",{className:j.leftControl,children:(0,jsx_runtime_1.jsx)("button",{className:"group","data-testid":"carousel-left-control",onClick:C(m-1),type:"button",children:s||(0,jsx_runtime_1.jsx)(DefaultLeftControl,{})})}),(0,jsx_runtime_1.jsx)("div",{className:j.rightControl,children:(0,jsx_runtime_1.jsx)("button",{className:"group","data-testid":"carousel-right-control",onClick:C(m+1),type:"button",children:a||(0,jsx_runtime_1.jsx)(DefaultRightControl,{})})})]})]})},DefaultLeftControl=(exports.Carousel=Carousel,()=>{var e=(0,ThemeContext_1.useTheme)().theme.carousel;return(0,jsx_runtime_1.jsx)("span",{className:e.control.base,children:(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretLeft,{size:20,weight:"bold",color:"white"})})}),DefaultRightControl=()=>{var e=(0,ThemeContext_1.useTheme)().theme.carousel;return(0,jsx_runtime_1.jsx)("span",{className:e.control.base,children:(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretRight,{size:20,weight:"bold",color:"white"})})};