"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Popover=exports.PopoverComponent=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),Description_1=require("./Description"),Title_1=require("./Title"),cn_1=require("../../helpers/cn"),Action_1=require("./Action"),react_2=require("@floating-ui/react"),Container_1=require("./Container"),phosphor_react_1=require("phosphor-react"),PopoverContext_1=require("./PopoverContext"),ThemeContext_1=require("../../Keep/ThemeContext"),PopoverComponent=({children:e,className:t,trigger:r="click",position:o="bottom-start",showDismissIcon:i=!0,showArrow:n=!0,icon:s,...a})=>{const[c,l]=(0,react_1.useState)(!1),[_,p]=(0,react_1.useState)(!0);var u=(0,react_1.useRef)(null),m=(0,ThemeContext_1.useTheme)().theme.popover["root"],{refs:o,floatingStyles:d,context:x}=(0,react_2.useFloating)({open:c,onOpenChange:l,middleware:[(0,react_2.offset)(10),(0,react_2.flip)(),(0,react_2.shift)(),(0,react_2.arrow)({element:u}),(0,react_2.autoPlacement)({crossAxis:!0,alignment:"start",allowedPlacements:["top","right","bottom","left"]}),(0,react_2.hide)({strategy:"escaped"})],whileElementsMounted:react_2.autoUpdate,placement:o}),h=(0,react_2.useHover)(x,{enabled:"hover"===r}),r=(0,react_2.useClick)(x,{enabled:"click"===r}),C=(0,react_2.useDismiss)(x),v=(0,react_2.useRole)(x),P=(0,react_2.useTransitionStyles)(x,{duration:300})["styles"],{getReferenceProps:r,getFloatingProps:C}=(0,react_2.useInteractions)([r,C,v,h]),v=react_1.Children.toArray(e).filter(e=>(0,react_1.isValidElement)(e)&&e.type===Action_1.Action);const f=react_1.Children.toArray(e).some(e=>(0,react_1.isValidElement)(e)&&e.type===Title_1.Title);h=react_1.Children.toArray(e).filter(e=>(0,react_1.isValidElement)(e)&&e.type!==Action_1.Action);return(0,react_1.useEffect)(()=>{f?p(!0):p(!1)},[f]),(0,jsx_runtime_1.jsxs)(PopoverContext_1.PopoverContext.Provider,{value:{isTitleExist:_},children:[(0,jsx_runtime_1.jsx)("div",{className:"inline-block",ref:o.setReference,...r(),onClick:()=>l(!c),children:v}),c&&(0,jsx_runtime_1.jsxs)("div",{...a,ref:o.setFloating,style:{...d,...P},...C(),className:(0,cn_1.cn)(t,m.base),children:[n&&(0,jsx_runtime_1.jsx)(react_2.FloatingArrow,{ref:u,context:x,fill:"#FFFFFF"}),i&&(0,jsx_runtime_1.jsx)("button",{onClick:()=>l(!1),className:m.icon,children:void 0!==s?s:(0,jsx_runtime_1.jsx)(phosphor_react_1.XCircle,{size:24,color:"#5E718D",weight:"light"})}),(0,jsx_runtime_1.jsx)("div",{children:h})]})]})};exports.PopoverComponent=PopoverComponent,Title_1.Title.displayName="Popover.Title",Description_1.Description.displayName="Popover.Description",Action_1.Action.displayName="Popover.Body",Container_1.Container.displayName="Popover.Container",exports.Popover=Object.assign(exports.PopoverComponent,{Title:Title_1.Title,Description:Description_1.Description,Action:Action_1.Action,Container:Container_1.Container});