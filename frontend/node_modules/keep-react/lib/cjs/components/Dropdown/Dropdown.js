"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,r,t,o){void 0===o&&(o=t);var n=Object.getOwnPropertyDescriptor(r,t);n&&("get"in n?r.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,o,n)}:function(e,r,t,o){e[o=void 0===o?t:o]=r[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dropdown=void 0;const jsx_runtime_1=require("react/jsx-runtime"),phosphor_react_1=require("phosphor-react"),react_1=__importStar(require("react")),uuid_1=require("../../helpers/uuid"),ThemeContext_1=require("../../Keep/ThemeContext"),Button_1=require("../Button/Button"),Floating_1=require("../Floating"),DropdownDivider_1=require("./DropdownDivider"),DropdownHeader_1=require("./DropdownHeader"),DropdownItem_1=require("./DropdownItem"),icons={top:(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretUp,{size:18}),right:(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretRight,{size:18}),bottom:(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretDown,{size:18}),left:(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretLeft,{size:18})},DropdownComponent=({children:e,dismissOnClick:r=!0,...t})=>{const o=(0,ThemeContext_1.useTheme)().theme.dropdown;const{placement:n="bottom-start",trigger:i="click",label:a,floatingArrow:d=!1,arrowIcon:s=!0,..._}=t;t=(0,react_1.useMemo)(()=>{var[e]=n.split("-");return icons[e]??(0,jsx_runtime_1.jsx)(phosphor_react_1.CaretDown,{size:18})},[n]);const[c,u]=(0,react_1.useState)(void 0);var[p,l]=(0,react_1.useState)(void 0);const m=(0,react_1.useCallback)(e=>react_1.default.isValidElement(e)?e.type===DropdownItem_1.DropdownItem?react_1.default.cloneElement(e,{onClick:()=>{e.props.onClick?.(),r&&u((0,uuid_1.uuid)())}}):e.props.children&&"object"==typeof e.props.children?react_1.default.cloneElement(e,{children:react_1.Children.map(e.props.children,m)}):e:e,[r]);var h=(0,react_1.useMemo)(()=>(0,jsx_runtime_1.jsx)("ul",{className:o.content,children:react_1.Children.map(e,m)}),[m,e,o.content]);return(0,jsx_runtime_1.jsx)(Floating_1.Floating,{content:h,style:"auto",animation:"duration-100",placement:n,arrow:d,trigger:i,theme:o.floating,minWidth:p,closeRequestKey:c,children:(0,jsx_runtime_1.jsxs)(({children:e,setButtonWidth:r})=>{const t=(0,react_1.useRef)(null);return(0,react_1.useEffect)(()=>{t.current&&r?.(t.current.clientWidth)},[t,r]),(0,jsx_runtime_1.jsx)(Button_1.Button,{..._,ref:t,children:e})},{setButtonWidth:l,children:[a,(0,jsx_runtime_1.jsx)("span",{className:"ml-1",children:s&&t})]})})};DropdownComponent.displayName="Dropdown",DropdownItem_1.DropdownItem.displayName="Dropdown.Item",DropdownHeader_1.DropdownHeader.displayName="Dropdown.Header",DropdownDivider_1.DropdownDivider.displayName="Dropdown.Divider",exports.Dropdown=Object.assign(DropdownComponent,{Item:DropdownItem_1.DropdownItem,Header:DropdownHeader_1.DropdownHeader,Divider:DropdownDivider_1.DropdownDivider});