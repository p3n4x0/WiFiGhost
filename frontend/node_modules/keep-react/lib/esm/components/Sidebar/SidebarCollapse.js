import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from"react/jsx-runtime";import{CaretDown}from"phosphor-react";import{useEffect,useId,useState}from"react";import{Tooltip}from"../Tooltip";import{useSidebarContext}from"./SidebarContext";import{SidebarItemContext}from"./SidebarItemContext";import{useTheme}from"../../Keep/ThemeContext";import{mergeDeep}from"../../helpers/mergeDeep";import{cn}from"../../helpers/cn";const SidebarCollapse=({children:e,className:s,icon:a,label:r,open:t=!1,theme:o={},...i})=>{var l=useId();const n=useSidebarContext()["isCollapsed"],[d,p]=useState(t);var c=useTheme().theme.sidebar.collapse,c=mergeDeep(c,o);useEffect(()=>p(t),[t]);return _jsxs(({children:e})=>_jsx("li",{children:n&&!d?_jsx(Tooltip,{content:r,placement:"right",children:e}):e}),{children:[_jsxs("button",{id:"keep-sidebar-collapse-"+l,onClick:()=>p(!d),title:r,type:"button",className:cn(c.button,s),...i,children:[a&&_jsx("div",{"aria-hidden":!0,"data-testid":"keep-sidebar-collapse-icon",className:cn(c.icon.base,c.icon.open[d?"on":"off"]),children:a}),n?_jsx("span",{className:"sr-only",children:r}):_jsxs(_Fragment,{children:[_jsx("span",{"data-testid":"keep-sidebar-collapse-label",className:c.label.base,children:r}),_jsx(CaretDown,{size:24,weight:"bold"})]})]}),_jsx("ul",{"aria-labelledby":"keep-sidebar-collapse-"+l,hidden:!d,className:c.list,children:_jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!0},children:e})})]})};SidebarCollapse.displayName="Sidebar.Collapse";export{SidebarCollapse};