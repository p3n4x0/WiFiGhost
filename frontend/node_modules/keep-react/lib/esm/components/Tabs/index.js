import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import{Children,forwardRef,useEffect,useImperativeHandle,useMemo,useRef,useState}from"react";import{TabItem}from"./TabItem";import{useTheme}from"../../Keep/ThemeContext";import{cn}from"../../helpers/cn";const TabsComponent=forwardRef(({children:t,style:e="default",iconPosition:i="left",borderPosition:o="bottom",className:a,onActiveTabChange:n,...s},r)=>{const b=useTheme().theme.tabs,c=useMemo(()=>Children.map(t,({props:t})=>t),[t]),l=useRef([]),[m,d]=useState(Math.max(0,c.findIndex(t=>t.active))),[f,p]=useState(Math.max(0,c.findIndex(t=>t.active))),h=t=>{d(t),n&&n(t)},u=b.tabList.tabItem.styles[e];return useEffect(()=>{l.current[f]?.focus()},[f]),useImperativeHandle(r,()=>({setActiveTab:h})),_jsxs("div",{className:cn(b.base,a),children:[_jsx("div",{"aria-label":"Tabs",role:"tablist",className:cn(b.tabList.base,"pills"!==e&&b.tabList.borderPosition[o],a),...s,children:c.map((t,a)=>_jsxs("button",{type:"button","aria-controls":a+1+"-tabpanel-"+a,"aria-selected":a===m,className:cn(b.tabList.tabItem.base,u.base,a===m&&u.active.on,a!==m&&!t.disabled&&u.active.off,"top"===o&&a===m&&u.borderPosition.top,"bottom"===o&&a===m&&u.borderPosition.bottom),disabled:t.disabled,id:a+1+"-tab-"+a,onClick:()=>{return t=[{target:a}["target"]][0],h(t),void p(t);var t},onKeyDown:t=>{return{event:t,target:e}=[{event:t,target:a}][0],"ArrowLeft"===t.key&&p(Math.max(0,f-1)),"ArrowRight"===t.key&&p(Math.min(c.length-1,f+1)),void("Enter"===t.key&&(h(e),p(e)));var e},role:"tab",tabIndex:a===f?0:-1,children:[t.icon&&"left"===i&&_jsx("span",{className:b.tabList.tabItem.icon.left,children:t.icon}),t.title,t.icon&&"right"===i&&_jsx("span",{className:b.tabList.tabItem.icon.right,children:t.icon}),t.notification&&_jsx("span",{className:cn(b.tabList.tabItem.notification.base,t.notificationColor&&b.tabList.tabItem.notification.notificationColor[t.notificationColor],!t.notificationColor&&b.tabList.tabItem.notification.notificationColor.info,"string"==typeof t.notification&&b.tabList.tabItem.notification.type.text,"number"==typeof t.notification&&b.tabList.tabItem.notification.type.number),children:t.notification})]},a))}),_jsx("div",{children:c.map((t,e)=>_jsx("div",{"aria-labelledby":e+1+"-tab-"+e,className:b.tabPanel,hidden:e!==m,id:e+1+"-tabpanel-"+e,role:"tabpanel",tabIndex:0,children:t.children},e))})]})}),Tabs=(TabsComponent.displayName="Tabs",TabItem.displayName="Tabs.Item",Object.assign(TabsComponent,{Item:TabItem}));export{Tabs};